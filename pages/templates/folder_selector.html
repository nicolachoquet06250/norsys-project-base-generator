<!doctype html>
<html lang="en">
<head>
    {{range .Page.MetaData}}
        <meta
                {{if not (eq .Charset "")}} charset="{{.Charset}}" {{end}}
                {{if not (eq .Name "")}} name="{{.Name}}" {{end}}
                {{if not (eq .HttpEquiv "")}} http-equiv="{{.HttpEquiv}}" {{end}}
                {{if not (eq .Content "")}} content="{{.Content}}" {{end}}
        />
    {{end}}
    <title> {{ .Page.Title.Tab }} </title>

    {{range .Page.CssFiles}}
        <link rel="stylesheet" href="{{.}}">
    {{end}}

    <script src="assets/init_astilectron.js"></script>


    <script>
        document.addEventListener('astilectron-ready', () => {
            /**
             * @param {string} message.channel
             * @param {Record<string, string>|Record<string, string>[]} message.data
             * @returns {string}
             */
            const newMessageHandler = message => {
                if (message.channel === "GetTree") {
                    const tree = message.data.tree;

                    console.log(tree)

                    const menu = document.querySelector('.left-menu')

                    const list = document.createElement('ul')

                    for (const dir of tree) {
                        const item = document.createElement('li')
                        item.innerHTML = dir

                        list.appendChild(item)
                    }

                    menu.appendChild(list)

                    return tree;
                }
            };
            astilectron.onMessage(newMessageHandler);

            setTimeout(() => {
                sendMessage({
                    channel: `OpenFolder`,
                    data: {}
                })
            }, 1000)
        });
    </script>
</head>
<body>
    <header>
        <div class="top-bar">
            <div class="icons"></div>

            <div class="breadcrumb">
                <div class="search-zone"></div>

                <div class="icons"></div>
            </div>

            <div class="search-zone"></div>
        </div>
    </header>

    <main>
        <nav class="left-menu"></nav>

        <div class="element-list"></div>
    </main>

    <footer>
        <div class="search-zone">
            <div>
                <label for="folder">Nom du r√©pertoire:</label>

                <input id="folder" type="text">
            </div>

            <div class="buttons">
                <button>Ouvrir</button>

                <button>Annuler</button>
            </div>
        </div>
    </footer>

</body>
</html>